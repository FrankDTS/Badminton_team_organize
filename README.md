# 🏸 羽球分隊管理系統

一個智能化的羽球分隊管理應用程式，支持多場地管理、智慧分隊算法和視覺化場地顯示。

## ✨ 功能特色

### 🎯 核心功能
- **參與者管理**：添加、編輯、刪除參與者，設置技能等級（1-10級）
- **多場地支持**：可配置1-10個羽球場地，每個場地獨立運作
- **智慧分隊**：基於技能等級和公平性原則的自動分隊算法
- **視覺化場地**：羽球場圖案顯示，清楚展示每場比賽的對陣情況
- **比賽統計**：追蹤每位參與者的比賽場數和輪次記錄
- **遊戲歷史記錄**：記錄所有比賽分配歷史和統計數據

### 🔥 亮點功能
- **場地獨立管理**：每個場地可單獨開始比賽，互不干擾
- **防重複分配**：確保同一參與者不會同時在多個場地比賽
- **持續顯示**：分隊結果會持續顯示直到下一輪開始
- **智能按鈕**：按鈕文字根據場地狀態動態調整
- **公平輪換**：優先安排比賽場次較少的參與者
- **優先級分配系統**：使用先進的優先級評分算法確保公平性
- **防連續出場機制**：避免玩家連續多場比賽，確保適當休息

## 🚀 快速開始

### 系統需求
- Node.js 18+ 
- npm 或 yarn

### 安裝步驟

1. **克隆專案**
   ```bash
   git clone <repository-url>
   cd badminton-team-app
   ```

2. **安裝依賴**
   ```bash
   npm install
   ```

3. **啟動開發服務器**
   ```bash
   npm run dev
   ```

4. **打開瀏覽器**
   
   訪問 [http://localhost:3000](http://localhost:3000) 或 [http://localhost:3001](http://localhost:3001)

## 📱 使用指南

### 第一步：參與者管理
1. 點擊「參與者管理」頁籤
2. 添加參與者：
   - 輸入姓名
   - 選擇技能等級（1-10級，1為初級，10為專業）
   - 點擊「新增」
3. 可隨時編輯參與者的技能等級或刪除參與者

### 第二步：場地管理與分隊
1. 點擊「羽球場管理」頁籤
2. 設置場地數量（1-10個）
3. 每個場地操作：
   - **首次使用**：點擊「開始分隊」按鈕
   - **查看對陣**：觀察羽球場視覺化圖案
   - **下一輪比賽**：點擊「下一輪」按鈕更新分隊

### 羽球場視覺化說明
- **綠色場地**：模擬真實羽球場
- **藍隊 vs 紅隊**：左右兩邊分別代表不同隊伍
- **玩家資訊**：顯示姓名、技能等級和已參與場數
- **場地標線**：包含中線、發球線和網子

## 🏗️ 技術架構

### 前端技術棧
- **框架**：Next.js 14+ (React)
- **語言**：TypeScript
- **樣式**：Tailwind CSS
- **UI組件**：Shadcn/ui
- **圖標**：Lucide React

### 項目結構
```
badminton-team-app/
├── app/                           # Next.js App Router
│   ├── layout.tsx                # 全局布局
│   ├── page.tsx                  # 主頁面
│   ├── api/participants/         # API 路由
│   └── globals.css               # 全局樣式
├── components/                   # React組件
│   ├── ui/                      # 基礎UI組件 (50+ Shadcn/ui 組件)
│   ├── participant-manager.tsx  # 參與者管理
│   ├── court-display.tsx        # 場地顯示
│   ├── court-manager.tsx        # 場地管理器
│   ├── team-allocation.tsx      # 分隊組件
│   ├── game-schedule.tsx        # 遊戲排程
│   ├── rotation-manager.tsx     # 輪換管理
│   └── security-dashboard.tsx   # 安全控制面板
├── lib/                         # 工具函數和邏輯
│   ├── app-context.tsx          # 全局狀態管理
│   ├── team-allocation-algorithm.ts        # 核心分隊算法
│   ├── team-allocation-algorithm-enhanced.ts # 增強版算法
│   ├── security.ts              # 安全功能
│   └── utils.ts                 # 工具函數
├── hooks/                       # React Hooks
├── scripts/                     # 建構腳本
├── middleware.ts                # Next.js 中間件
└── 多個測試文件 (*.js)           # 演算法測試和驗證
```

### 核心算法
**智慧分隊算法特點**：
- **優先級評分系統**：綜合考慮場次數量、等待時間、輪次規則等因素
- **公平性保證**：確保所有參與者的比賽場次差距控制在合理範圍內（≤1場）
- **技能平衡**：兩隊技能等級總和差異不超過3級
- **防連續出場**：避免玩家連續多場比賽，確保適當休息
- **組合記憶**：記錄4人組合歷史，避免重複配對
- **動態輪次計算**：基於場地數量自動計算輪次
- **全面測試驗證**：包含50+個測試案例確保算法穩定性

## ⚙️ 配置說明

### 可調整參數
- **場地數量**：1-10個場地
- **技能等級**：1-10級系統
- **每場人數**：固定4人（羽球雙打標準）

### 分隊規則
- 每場比賽4人（2vs2）
- 兩隊技能等級總和差異不超過3級
- 參與者間比賽場次差距不超過1場
- 優先安排比賽場次較少的參與者
- 每兩輪必須讓所有人至少上場一次
- 防止玩家連續在相同場地出場
- 記錄和避免重複的4人組合配對

## 🎮 使用場景

### 適用環境
- **羽球社團**：定期聚會活動分隊
- **公司團建**：羽球比賽組織
- **學校體育課**：學生分組練習
- **羽球館**：客戶分隊服務
- **私人聚會**：朋友間比賽安排

### 支持規模
- **最少參與者**：4人（單場比賽）
- **建議參與者**：8-20人（多場地輪換）
- **最大場地數**：10個場地
- **無上限人數**：支持大型活動

## 📊 統計功能

### 參與者統計
- 個人比賽場次追蹤
- 技能等級分佈分析
- 輪換公平性評估

### 場地統計
- 各場地使用率
- 平均技能等級分佈
- 比賽輪次記錄

## 🛠️ 開發相關

### 開發命令
```bash
# 啟動開發服務器
npm run dev

# 構建生產版本
npm run build

# 啟動生產服務器
npm run start

# 代碼檢查
npm run lint
```

### 測試與驗證
項目包含大量測試文件來驗證算法正確性：
```bash
# 運行主要算法測試
node test-allocation.js

# 運行綜合測試
node comprehensive-test.js

# 運行連續出場檢測測試
node test-consecutive-final-solution.js

# 運行公平性測試
node test-initial-fairness.js
```

### 環境變數
目前版本無需額外環境變數配置。

### 瀏覽器支持
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 🤝 貢獻指南

### 問題回報
如發現問題，請在 [Issues](../../issues) 中提交詳細描述。

### 功能建議
歡迎提交功能建議和改進想法。

### 開發貢獻
1. Fork 本專案
2. 創建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 開啟 Pull Request

## 📊 項目特色

### 算法優化歷程
本項目經歷了多次重要的算法改進：
1. **初版算法**：基礎的技能平衡和場次控制
2. **公平性優化**：解決場次分配不均問題
3. **優先級系統**：引入綜合評分機制
4. **連續出場防護**：避免玩家過度疲勞
5. **全面測試**：50+ 測試案例覆蓋各種場景

### 安全性功能
- 輸入驗證和清理
- 中間件安全檢查
- 防XSS攻擊保護
- 安全控制面板

## 📄 授權條款

本專案採用 MIT 授權條款 - 詳見 [LICENSE](LICENSE) 文件

## 🙏 致謝

- [Next.js](https://nextjs.org/) - React 框架
- [Tailwind CSS](https://tailwindcss.com/) - CSS 框架  
- [Shadcn/ui](https://ui.shadcn.com/) - UI 組件庫
- [Lucide](https://lucide.dev/) - 圖標庫
- [TypeScript](https://www.typescriptlang.org/) - 類型安全
- [Radix UI](https://www.radix-ui.com/) - 無障礙UI組件

## 📞 聯繫方式

如有任何問題或建議，歡迎聯繫專案維護者。

---

**🎉 開始享受智慧化的羽球分隊體驗吧！**
